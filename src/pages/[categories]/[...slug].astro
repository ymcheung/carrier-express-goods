---
import { getCollection } from 'astro:content';
import Layout from '@layouts/Slug.astro';
import { Image } from 'astro:assets';

export async function getStaticPaths() {
  const tidyEntries = await getCollection('tidy');
  const utensilsEntries = await getCollection('utensils');
  const cleanEntries = await getCollection('clean');
  const decorationEntries = await getCollection('decoration');
  const outdoorEntries = await getCollection('outdoor');
  const stationaryEntries = await getCollection('stationary');

  return [
    ...tidyEntries,
    ...utensilsEntries,
    ...cleanEntries,
    ...decorationEntries,
    ...outdoorEntries,
    ...stationaryEntries
  ].map((entry) => {
    return {
      params: { categories: entry.collection, slug: entry.slug },
      props: { entry }
    };
  });
}

const { entry } = Astro.props;
const { categories: categoryName, slug } = Astro.params;
const {
  data: { title, description, dateModified, datePublished }
} = entry;

const { Content } = await entry.render();
---

<Layout
  title={title}
  description={description}
  dateModified={dateModified}
  datePublished={datePublished}
>
  <Image
    class='cover'
    src={import(`../../assets/${categoryName}/${slug}/cover.jpg`)}
    width={640}
    height={640}
    alt=''
  />
  <Content />
</Layout>

<style lang='scss'>
  .cover {
    display: block;
    max-width: 100%;
    height: auto;
    margin-block-end: 1.2rem;
    border-radius: 24px;

    @media screen and (min-width: 992px) {
      max-width: 384px;
    }
  }
</style>
